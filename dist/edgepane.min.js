/*!
 * EdgePane Sidebar (EGP version)
 * ------------------------------------
 * A lightweight, responsive, customizable sidebar
 * with dropdowns, branding, overlay, and theming.
 *
 * Version: 1.0.0
 * Author: Your Name / Team
 * License: MIT
 *
 * Features:
 * - Initialize sidebar with egpSidebar.init({...})
 * - Toggle open/closed states
 * - Dropdown menus (single or multi)
 * - Overlay for mobile
 * - Remember dropdown state (optional)
 * - Callbacks for events (onToggle, onDropdown, etc.)
 *
 * Usage:
 *  egpSidebar.init({
 *    sidebarState: "open",        // "open" | "closed"
 *    hoverExpand: true,           // expand on hover
 *    closeOnClickOutside: true,   // overlay behavior
 *    dropdownMode: "single",      // or "multi"
 *    rememberDropdowns: true
 *  });
 *
 * Dependencies:
 *  - jQuery (required)
 *  - Bootstrap Icons (optional, for icons)
 *
 * ------------------------------------
 * NOTE: This is the MINIFIED build.
 * For readable code, see /src/edgepane.js
 */
(function(root,factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"&&typeof module==="object"){module.exports=factory(require("jquery"))}else{root.edgePane=factory(root.jQuery)}})(this,function($){"use strict";const edgePane={config:{dropdownMode:"multi",sidebarState:"open",hoverExpand:true,closeOnClickOutside:true,rememberDropdowns:true,sidebarColor:"#059669",fontFamily:"'Montserrat', sans-serif",sidebarWidth:"16rem",textColor:"#fff",activeLinkBg:"rgba(255,255,255,0.7)",activeLinkColor:"rgba(5,150,105,1)",showBrand:true,brand:{brandLogoSrc:"",brandName:"",brandTagline:""},onSidebarToggle:function(state){},onDropdownToggle:function(id,isOpen){}},init(userOptions={}){this.config=$.extend(true,{},this.config,userOptions);const $sidebar=$(".egp-sidebar"),$overlay=$(".egp-sidebar-overlay"),$toggler=$(".egp-sidebar-toggle"),$mainContent=$(".egp-main-content"),$dropdowns=$(".egp-sidebar-dropdown"),$logo=$(".egp-sidebar-logo"),$brandHeader=$(".egp-sidebar-header");const SIDEBAR_STATE_KEY="sidebar-state",DROPDOWN_STATE_KEY="sidebar-dropdowns",ACTIVE_LINK_KEY="active-link-key";let isHoverOpen=false;$(document).on("click",".egp-sidebar-link",function(){const text=$(this).find(".egp-sidebar-link-text").text().trim();localStorage.setItem(ACTIVE_LINK_KEY,text);$(".egp-sidebar-link").removeClass("active");$(this).addClass("active")});(function restoreActiveLink(){const currentPath=window.location.pathname.replace(/\/$/,"");let $match=$(".egp-sidebar-link").filter(function(){const href=$(this).attr("href");if(!href||href==="#"){return false}const linkPath=new URL(href,window.location.origin).pathname.replace(/\/$/,"");return currentPath===linkPath||currentPath.startsWith(linkPath+"/")}).first();if(!$match.length){const saved=localStorage.getItem(ACTIVE_LINK_KEY);$match=$(".egp-sidebar-link").filter(function(){return $(this).find(".egp-sidebar-link-text").text().trim()===saved}).first()}$(".egp-sidebar-link").removeClass("active");($match.length?$match:$(".egp-sidebar-link").first()).addClass("active")})();$(":root").css("--sidebar-width-open",this.config.sidebarWidth);$(":root").css({"--sidebar-color":this.config.textColor,"--sidebar-bg-active":this.config.activeLinkBg,"--sidebar-color-active":this.config.activeLinkColor});if(!this.config.showBrand){$brandHeader.hide()}else{$brandHeader.show()}if(this.config.brand.brandLogoSrc)$logo.attr("src",this.config.brand.brandLogoSrc);if(this.config.brand.brandName)$(".egp-sidebar-brand-name").text(this.config.brand.brandName);if(this.config.brand.brandTagline)$(".egp-sidebar-brand-tagline").text(this.config.brand.brandTagline);$sidebar.css({background:this.config.sidebarColor,fontFamily:this.config.fontFamily});let savedState=this.config.sidebarState;if(this.config.rememberDropdowns){savedState=localStorage.getItem(SIDEBAR_STATE_KEY)||this.config.sidebarState}if($(window).width()<=1023){savedState="closed"}$sidebar.attr("data-state",savedState);updateContentShift(savedState);let savedDropdowns=[];if(this.config.rememberDropdowns){savedDropdowns=JSON.parse(localStorage.getItem(DROPDOWN_STATE_KEY)||"[]")}if(this.config.dropdownMode==="multi"){savedDropdowns.forEach(id=>$("#"+id).addClass("open"))}else{if(savedDropdowns.length)$("#"+savedDropdowns[0]).addClass("open")}$toggler.on("click",()=>{const isOpen=$sidebar.attr("data-state")==="open";const newState=isOpen?"closed":"open";setSidebarState(newState)});if(this.config.closeOnClickOutside){$overlay.on("click",()=>setSidebarState("closed"))}$dropdowns.each((_,el)=>{const $dropdown=$(el),$toggle=$dropdown.find(".egp-dropdown-toggle").first();$toggle.on("click",()=>{const isOpen=$dropdown.hasClass("open");if(edgePane.config.dropdownMode==="single"){$dropdowns.not($dropdown).removeClass("open").find(".egp-dropdown-toggle").attr("aria-expanded","false");$dropdowns.not($dropdown).find(".egp-dropdown-content").attr("aria-hidden","true")} $dropdown.toggleClass("open");$toggle.attr("aria-expanded",String(!isOpen));$dropdown.find(".egp-dropdown-content").attr("aria-hidden",String(isOpen));saveDropdowns();edgePane.config.onDropdownToggle($dropdown.attr("id"),!isOpen)})});if(this.config.hoverExpand){$sidebar.on("mouseenter",()=>{if($(window).width()>1023&&$sidebar.attr("data-state")==="closed"){$sidebar.attr("data-state","open");isHoverOpen=true}});$sidebar.on("mouseleave",()=>{if($(window).width()>1023&&isHoverOpen){$sidebar.attr("data-state","closed");isHoverOpen=false}})}function setSidebarState(state){$sidebar.attr("data-state",state);updateContentShift(state);if(edgePane.config.rememberDropdowns){localStorage.setItem(SIDEBAR_STATE_KEY,state)}if($(window).width()<=1023){$overlay.toggleClass("show",state==="open")}edgePane.config.onSidebarToggle(state)}function saveDropdowns(){if(!edgePane.config.rememberDropdowns)return;const openIds=$dropdowns.filter(".open").map((_,el)=>$(el).attr("id")).get();localStorage.setItem(DROPDOWN_STATE_KEY,JSON.stringify(openIds))}function updateContentShift(state){if($(window).width()>1023){if(state==="open"){$mainContent.addClass("shifted").removeClass("compact")}else{$mainContent.addClass("compact").removeClass("shifted")}}else{$mainContent.removeClass("shifted compact")}}$(window).on("resize",()=>{updateContentShift($sidebar.attr("data-state"));if($(window).width()>1023)$overlay.removeClass("show")})}};return edgePane});
