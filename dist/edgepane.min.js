/*!
 * EdgePane Sidebar (EGP version)
 * ------------------------------------
 * A lightweight, responsive, customizable sidebar
 * with dropdowns, branding, overlay, and theming.
 *
 * Version: 1.0.0
 * Author: Your Name / Team
 * License: MIT
 *
 * Features:
 * - Initialize sidebar with egpSidebar.init({...})
 * - Toggle open/closed states
 * - Dropdown menus (single or multi)
 * - Overlay for mobile
 * - Remember dropdown state (optional)
 * - Callbacks for events (onToggle, onDropdown, etc.)
 *
 * Usage:
 *  egpSidebar.init({
 *    sidebarState: "open",        // "open" | "closed"
 *    hoverExpand: true,           // expand on hover
 *    closeOnClickOutside: true,   // overlay behavior
 *    dropdownMode: "single",      // or "multi"
 *    rememberDropdowns: true
 *  });
 *
 * Dependencies:
 *  - jQuery (required)
 *  - Bootstrap Icons (optional, for icons)
 *
 * ------------------------------------
 * NOTE: This is the MINIFIED build.
 * For readable code, see /src/edgepane.js
 */
((e,t)=>{"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):e.edgePane=t(e.jQuery)})(this,function(m){let u={config:{dropdownMode:"multi",sidebarState:"open",hoverExpand:!0,closeOnClickOutside:!0,rememberDropdowns:!0,sidebarColor:"rgba(225,225,225,1)",fontFamily:"'Montserrat', sans-serif",sidebarWidth:"16rem",textColor:"rgba(70,70,70,1)",activeLinkBg:"rgba(180,180,180,1)",activeLinkColor:"rgba(70,70,70,1)",showBrand:!0,brand:{brandLogoSrc:"",brandName:"",brandTagline:""},onSidebarToggle:function(e){},onDropdownToggle:function(e,t){}},init(e={}){this.config=m.extend(!0,{},this.config,e);let t=m(".egp-sidebar"),o=m(".egp-sidebar-overlay");e=m(".egp-sidebar-toggle");let i=m(".egp-main-content"),a=m(".egp-sidebar-dropdown");var n=m(".egp-sidebar-logo"),r=m(".egp-sidebar-header");let s="sidebar-state",d="sidebar-dropdowns",l="active-link-key",g=!1,c=null;{m(document).on("click",".egp-sidebar-link",function(){var e=m(this).find(".egp-sidebar-link-text").text().trim();localStorage.setItem(l,e),m(".egp-sidebar-link").removeClass("active"),m(this).addClass("active")});let o=m(".egp-sidebar-link").map(function(){var e=m(this).attr("href");return e&&"#"!==e?new URL(e,window.location.origin).pathname.replace(/^\/|\/$/g,"").toLowerCase():null}).get(),t=(e=>{if((e=e.split(/[?#]/)[0].split("/").filter(Boolean)).length){var t=e[e.length-1].toLowerCase();if(o.includes(t))return t;if(2<=e.length){t=e.slice(-2).join("/").toLowerCase();if(o.includes(t))return t}}return null})(window.location.pathname.replace(/\/$/,""));if((c=t?m(".egp-sidebar-link").filter(function(){var e=m(this).attr("href");return!(!e||"#"===e)&&e.replace(/^\.\//,"").toLowerCase().toLowerCase()===t.toLowerCase()}).first():c)&&c.length){m(".egp-sidebar-link").removeClass("active"),c.addClass("active");var f=c.find(".egp-sidebar-link-text").text().trim();localStorage.setItem(l,f)}else{let e=localStorage.getItem(l);e&&(c=m(".egp-sidebar-link").filter(function(){return m(this).find(".egp-sidebar-link-text").text().trim()===e}).first()).length&&(m(".egp-sidebar-link").removeClass("active"),c.addClass("active"))}}m(".egp-sidebar-link").removeClass("active"),(c.length?c:m(".egp-sidebar-link").first()).addClass("active"),m(":root").css("--sidebar-width-open",this.config.sidebarWidth),m(":root").css({"--sidebar-color":this.config.textColor,"--sidebar-bg-active":this.config.activeLinkBg,"--sidebar-color-active":this.config.activeLinkColor}),this.config.showBrand?r.show():r.hide(),this.config.brand.brandLogoSrc&&n.attr("src",this.config.brand.brandLogoSrc),this.config.brand.brandName&&m(".egp-sidebar-brand-name").text(this.config.brand.brandName),this.config.brand.brandTagline&&m(".egp-sidebar-brand-tagline").text(this.config.brand.brandTagline),t.css({background:this.config.sidebarColor,fontFamily:this.config.fontFamily});let p=this.config.sidebarState,b=(this.config.rememberDropdowns&&(p=localStorage.getItem(s)||p),m(window).width()<=1023&&(p="closed"),t.attr("data-state",p),w(p),[]);if(this.config.rememberDropdowns)try{b=JSON.parse(localStorage.getItem(d)||"[]")}catch(e){b=[]}function h(e){t.attr("data-state",e),w(e),u.config.rememberDropdowns&&localStorage.setItem(s,e),m(window).width()<=1023&&o.toggleClass("show","open"===e),u.config.onSidebarToggle(e)}function w(e){m(window).width()<=1023?i.removeClass("shifted compact"):(i.toggleClass("shifted","open"===e),i.toggleClass("compact","closed"===e))}"multi"===this.config.dropdownMode?b.forEach(e=>m("#"+e).addClass("open")):b.length&&m("#"+b[0]).addClass("open"),e.off("click").on("click",()=>{h("open"===t.attr("data-state")?"closed":"open")}),this.config.closeOnClickOutside&&o.off("click").on("click",()=>h("closed")),a.each((e,t)=>{let o=m(t),i=o.find(".egp-dropdown-toggle").first();i.on("click",()=>{var e,t=o.hasClass("open");"single"===u.config.dropdownMode&&(a.not(o).removeClass("open").find(".egp-dropdown-toggle").attr("aria-expanded","false"),a.not(o).find(".egp-dropdown-content").attr("aria-hidden","true")),o.toggleClass("open"),i.attr("aria-expanded",String(!t)),o.find(".egp-dropdown-content").attr("aria-hidden",String(t)),u.config.rememberDropdowns&&(e=a.filter(".open").map((e,t)=>m(t).attr("id")).get(),localStorage.setItem(d,JSON.stringify(e))),u.config.onDropdownToggle(o.attr("id"),!t)})}),this.config.hoverExpand&&(t.on("mouseenter",()=>{1023<m(window).width()&&"closed"===t.attr("data-state")&&(t.attr("data-state","open"),g=!0)}),t.on("mouseleave",()=>{1023<m(window).width()&&g&&(t.attr("data-state","closed"),g=!1)})),m(window).on("resize",()=>{w(t.attr("data-state")),1023<m(window).width()&&o.removeClass("show")})}};return u});
