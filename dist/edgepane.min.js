/*!
 * EdgePane Sidebar (EGP version)
 * ------------------------------------
 * A lightweight, responsive, customizable sidebar
 * with dropdowns, branding, overlay, and theming.
 *
 * Version: 1.0.0
 * Author: Your Name / Team
 * License: MIT
 *
 * Features:
 * - Initialize sidebar with egpSidebar.init({...})
 * - Toggle open/closed states
 * - Dropdown menus (single or multi)
 * - Overlay for mobile
 * - Remember dropdown state (optional)
 * - Callbacks for events (onToggle, onDropdown, etc.)
 *
 * Usage:
 *  egpSidebar.init({
 *    sidebarState: "open",        // "open" | "closed"
 *    hoverExpand: true,           // expand on hover
 *    closeOnClickOutside: true,   // overlay behavior
 *    dropdownMode: "single",      // or "multi"
 *    rememberDropdowns: true
 *  });
 *
 * Dependencies:
 *  - jQuery (required)
 *  - Bootstrap Icons (optional, for icons)
 *
 * ------------------------------------
 * NOTE: This is the MINIFIED build.
 * For readable code, see /src/edgepane.js
 */
((e,t)=>{"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):e.edgePane=t(e.jQuery)})(this,function(m){let w={config:{dropdownMode:"multi",sidebarState:"open",hoverExpand:!0,closeOnClickOutside:!0,rememberDropdowns:!0,sidebarColor:"#059669",fontFamily:"'Montserrat', sans-serif",sidebarWidth:"16rem",textColor:"#fff",activeLinkBg:"rgba(255,255,255,0.7)",activeLinkColor:"rgba(5,150,105,1)",showBrand:!0,brand:{brandLogoSrc:"",brandName:"",brandTagline:""},onSidebarToggle:function(e){},onDropdownToggle:function(e,t){}},init(e={}){this.config=m.extend(!0,{},this.config,e);let t=m(".egp-sidebar"),o=m(".egp-sidebar-overlay");e=m(".egp-sidebar-toggle");let i=m(".egp-main-content"),a=m(".egp-sidebar-dropdown");var n=m(".egp-sidebar-logo"),r=m(".egp-sidebar-header");let d="sidebar-state",s="sidebar-dropdowns",g="active-link-key",c=!1;m(document).on("click",".egp-sidebar-link",function(){var e=m(this).find(".egp-sidebar-link-text").text().trim();localStorage.setItem(g,e),m(".egp-sidebar-link").removeClass("active"),m(this).addClass("active")});{let e=localStorage.getItem(g);var l=m(".egp-sidebar-link").filter(function(){return m(this).find(".egp-sidebar-link-text").text().trim()===e});m(".egp-sidebar-link").removeClass("active"),(l.length?l:m(".egp-sidebar-link").first()).addClass("active")}m(":root").css("--sidebar-width-open",this.config.sidebarWidth),m(":root").css({"--sidebar-color":this.config.textColor,"--sidebar-bg-active":this.config.activeLinkBg,"--sidebar-color-active":this.config.activeLinkColor}),this.config.showBrand?r.show():r.hide(),this.config.brand.brandLogoSrc&&n.attr("src",this.config.brand.brandLogoSrc),this.config.brand.brandName&&m(".egp-sidebar-brand-name").text(this.config.brand.brandName),this.config.brand.brandTagline&&m(".egp-sidebar-brand-tagline").text(this.config.brand.brandTagline),t.css({background:this.config.sidebarColor,fontFamily:this.config.fontFamily});let f=this.config.sidebarState,p=(this.config.rememberDropdowns&&(f=localStorage.getItem(d)||this.config.sidebarState),m(window).width()<=1023&&(f="closed"),t.attr("data-state",f),h(f),[]);function b(e){t.attr("data-state",e),h(e),w.config.rememberDropdowns&&localStorage.setItem(d,e),m(window).width()<=1023&&o.toggleClass("show","open"===e),w.config.onSidebarToggle(e)}function h(e){1023<m(window).width()?"open"===e?i.addClass("shifted").removeClass("compact"):i.addClass("compact").removeClass("shifted"):i.removeClass("shifted compact")}this.config.rememberDropdowns&&(p=JSON.parse(localStorage.getItem(s)||"[]")),"multi"===this.config.dropdownMode?p.forEach(e=>m("#"+e).addClass("open")):p.length&&m("#"+p[0]).addClass("open"),e.on("click",()=>{b("open"===t.attr("data-state")?"closed":"open")}),this.config.closeOnClickOutside&&o.on("click",()=>b("closed")),a.each((e,t)=>{let o=m(t),i=o.find(".egp-dropdown-toggle").first();i.on("click",()=>{var e,t=o.hasClass("open");"single"===w.config.dropdownMode&&(a.not(o).removeClass("open").find(".egp-dropdown-toggle").attr("aria-expanded","false"),a.not(o).find(".egp-dropdown-content").attr("aria-hidden","true")),o.toggleClass("open"),i.attr("aria-expanded",String(!t)),o.find(".egp-dropdown-content").attr("aria-hidden",String(t)),w.config.rememberDropdowns&&(e=a.filter(".open").map((e,t)=>m(t).attr("id")).get(),localStorage.setItem(s,JSON.stringify(e))),w.config.onDropdownToggle(o.attr("id"),!t)})}),this.config.hoverExpand&&(t.on("mouseenter",()=>{1023<m(window).width()&&"closed"===t.attr("data-state")&&(t.attr("data-state","open"),c=!0)}),t.on("mouseleave",()=>{1023<m(window).width()&&c&&(t.attr("data-state","closed"),c=!1)})),m(window).on("resize",()=>{h(t.attr("data-state")),1023<m(window).width()&&o.removeClass("show")})}};return w});